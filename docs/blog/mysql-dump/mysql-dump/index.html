<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="format-detection" content="telephone=no"><meta name="referrer" content="no-referrer-when-downgrade"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"><meta name="generator" content="Astro v5.7.13"><meta name="theme-color" content="#fff" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#000" media="(prefers-color-scheme: dark)"><link rel="sitemap" href="/sitemap-index.xml"><link rel="manifest" href="/site.webmanifest"><link rel="alternate" type="application/rss+xml" title="Franco Z." href="https://barebones.superwebthemes.com/rss.xml"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CtSceO8m.js"></script><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><title>Mysql Dump | Franco Z.</title><meta name="title" content="Mysql Dump | Franco Z."><meta name="description" content="Como hacer buckups de bases de datos mysql"><link rel="canonical" href="https://francozuniga32.github.io/"><meta property="og:title" content="Mysql Dump"><meta property="og:description" content="Como hacer buckups de bases de datos mysql"><meta property="og:image" content="https://francozuniga32.github.io/undefined"><meta property="og:image:alt" content="Mysql Dump"><meta property="og:type" content="website"><meta property="og:locale" content="es-AR"><meta name="twitter:title" content="Mysql Dump"><meta name="twitter:description" content="Como hacer buckups de bases de datos mysql"><meta property="twitter:image" content="https://francozuniga32.github.io/undefined"><meta name="twitter:image:alt" content="Mysql Dump"><meta name="twitter:card" content="summary_large_image"><link rel="stylesheet" href="/_astro/_id_.Dln8I2nK.css"></head><body class="bg-bg dark:bg-dark-bg"> <header class="mx-auto flex max-w-screen-sm flex-wrap items-center justify-between p-3 pb-8 font-sans sm:p-6"> <a href="/" class="text-lg font-semibold text-black sm:text-xl dark:text-white">Franco Z.</a> <nav> <ul class="flex list-none items-center gap-2 p-0 sm:gap-3"> <li> <a href="/blog" class="prose"> Blog </a> </li><li> <a href="/projects" class="prose"> Projects </a> </li><li> <a href="/traking" class="prose"> Traking </a> </li> </ul> </nav> </header> <div class="mx-auto max-w-screen-sm p-3 font-sans sm:p-6"> <main class="min-h-[90vh]">   <div>  <h1 class="text-[36px] leading-snug font-bold text-balance text-black dark:text-white"> Mysql Dump </h1> <p class="text-muted-text dark:text-dark-muted-text mt-3"> 21/9/2024 </p> <hr class="border-muted-text dark:border-dark-muted-text my-12 border-[0.5px] opacity-10 dark:opacity-15"> <div class="prose mx-auto"> <p>mysql dump sirve para realizar respaldos de una base de datos lo cual es un backup en toda la regla.
Pero usando dbeaver en un imagen de mysql de docker no puede hacer funcionar el mysql dump integrado de dbeaver por lo que dedici realizar un script para poder realizar mis buckups.</p>
<pre class="astro-code dark-plus" style="background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"></span>
<span class="line"><span style="color:#6A9955">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Configuración</span></span>
<span class="line"><span style="color:#9CDCFE">DB_HOST</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"127.0.0.1"</span><span style="color:#6A9955">      # Dirección IP del servidor MySQL</span></span>
<span class="line"><span style="color:#9CDCFE">DB_PORT</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"3307"</span><span style="color:#6A9955">               # Puerto del servidor MySQL</span></span>
<span class="line"><span style="color:#9CDCFE">DB_USER</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"root"</span><span style="color:#6A9955">               # Nombre de usuario de MySQL</span></span>
<span class="line"><span style="color:#9CDCFE">DB_PASS</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"1234"</span><span style="color:#6A9955">      # Contraseña de MySQL (puede dejarse en blanco para que se solicite interactivamente)</span></span>
<span class="line"><span style="color:#9CDCFE">DB_NAME</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"dbname"</span><span style="color:#6A9955">          # Nombre de la base de datos a respaldar</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Generar la marca de tiempo en formato YYYYMMDD_HHMMSS</span></span>
<span class="line"><span style="color:#9CDCFE">TIMESTAMP</span><span style="color:#D4D4D4">=$(</span><span style="color:#DCDCAA">date</span><span style="color:#CE9178"> +"%Y%m%d_%H%M%S"</span><span style="color:#D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Nombre del archivo de salida</span></span>
<span class="line"><span style="color:#9CDCFE">OUTPUT_FILE</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"buckups/${</span><span style="color:#9CDCFE">DB_NAME</span><span style="color:#CE9178">}_backup_${</span><span style="color:#9CDCFE">TIMESTAMP</span><span style="color:#CE9178">}.sql"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Comando mysqldump con opciones</span></span>
<span class="line"><span style="color:#DCDCAA">mysqldump</span><span style="color:#569CD6"> --column-statistics=0</span><span style="color:#569CD6"> -u</span><span style="color:#D4D4D4"> ${</span><span style="color:#9CDCFE">DB_USER</span><span style="color:#D4D4D4">} </span><span style="color:#569CD6">-p</span><span style="color:#569CD6"> -h</span><span style="color:#D4D4D4"> ${</span><span style="color:#9CDCFE">DB_HOST</span><span style="color:#D4D4D4">} </span><span style="color:#569CD6">-P</span><span style="color:#D4D4D4"> ${</span><span style="color:#9CDCFE">DB_PORT</span><span style="color:#D4D4D4">} ${</span><span style="color:#9CDCFE">DB_NAME</span><span style="color:#D4D4D4">} > ${</span><span style="color:#9CDCFE">OUTPUT_FILE</span><span style="color:#D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Comprobar si el comando mysqldump tuvo éxito</span></span>
<span class="line"><span style="color:#C586C0">if</span><span style="color:#D4D4D4"> [ </span><span style="color:#569CD6">$?</span><span style="color:#D4D4D4"> -eq </span><span style="color:#B5CEA8">0</span><span style="color:#D4D4D4"> ]; </span><span style="color:#C586C0">then</span></span>
<span class="line"><span style="color:#DCDCAA">    echo</span><span style="color:#CE9178"> "Backup de la base de datos '${</span><span style="color:#9CDCFE">DB_NAME</span><span style="color:#CE9178">}' realizado con éxito en el archivo '${</span><span style="color:#9CDCFE">OUTPUT_FILE</span><span style="color:#CE9178">}'."</span></span>
<span class="line"><span style="color:#C586C0">else</span></span>
<span class="line"><span style="color:#DCDCAA">    echo</span><span style="color:#CE9178"> "Error al realizar el backup de la base de datos '${</span><span style="color:#9CDCFE">DB_NAME</span><span style="color:#CE9178">}'."</span></span>
<span class="line"><span style="color:#C586C0">fi</span></span>
<span class="line"></span></code></pre>
<p>con el siguiente podra recupeara un la db a un buckup echo.</p>
<pre class="astro-code dark-plus" style="background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"></span>
<span class="line"><span style="color:#6A9955">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Configuración</span></span>
<span class="line"><span style="color:#9CDCFE">DB_HOST</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"127.0.0.1"</span><span style="color:#6A9955">      # Dirección IP del servidor MySQL</span></span>
<span class="line"><span style="color:#9CDCFE">DB_PORT</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"3307"</span><span style="color:#6A9955">               # Puerto del servidor MySQL</span></span>
<span class="line"><span style="color:#9CDCFE">DB_USER</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"root"</span><span style="color:#6A9955">               # Nombre de usuario de MySQL</span></span>
<span class="line"><span style="color:#9CDCFE">DB_PASS</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"1234"</span><span style="color:#6A9955">      # Contraseña de MySQL (puede dejarse en blanco para que se solicite interactivamente)</span></span>
<span class="line"><span style="color:#9CDCFE">DB_NAME</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"timetable"</span><span style="color:#6A9955">          # Nombre de la base de datos a respaldar</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Directorio donde se encuentran los archivos .sql</span></span>
<span class="line"><span style="color:#9CDCFE">SQL_DIR</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"./buckups"</span><span style="color:#6A9955">          # Cambia a tu ruta de directorio de backups</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Listar archivos .sql en el directorio especificado</span></span>
<span class="line"><span style="color:#DCDCAA">echo</span><span style="color:#CE9178"> "Archivos .sql disponibles para restaurar:"</span></span>
<span class="line"><span style="color:#C586C0">select</span><span style="color:#9CDCFE"> SQL_FILE</span><span style="color:#D4D4D4"> in $(</span><span style="color:#DCDCAA">ls</span><span style="color:#D4D4D4"> ${</span><span style="color:#9CDCFE">SQL_DIR</span><span style="color:#D4D4D4">}</span><span style="color:#CE9178">/</span><span style="color:#569CD6">*</span><span style="color:#CE9178">.sql</span><span style="color:#D4D4D4">); </span><span style="color:#C586C0">do</span></span>
<span class="line"><span style="color:#C586C0">    if</span><span style="color:#D4D4D4"> [[ -n </span><span style="color:#CE9178">"</span><span style="color:#9CDCFE">$SQL_FILE</span><span style="color:#CE9178">"</span><span style="color:#D4D4D4"> ]]; </span><span style="color:#C586C0">then</span></span>
<span class="line"><span style="color:#DCDCAA">        echo</span><span style="color:#CE9178"> "Has seleccionado el archivo: </span><span style="color:#9CDCFE">$SQL_FILE</span><span style="color:#CE9178">"</span></span>
<span class="line"><span style="color:#C586C0">        break</span></span>
<span class="line"><span style="color:#C586C0">    else</span></span>
<span class="line"><span style="color:#DCDCAA">        echo</span><span style="color:#CE9178"> "Selección no válida. Por favor, selecciona un archivo válido."</span></span>
<span class="line"><span style="color:#C586C0">    fi</span></span>
<span class="line"><span style="color:#C586C0">done</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Confirmar restauración</span></span>
<span class="line"><span style="color:#DCDCAA">echo</span><span style="color:#CE9178"> "¿Seguro que deseas restaurar la base de datos '${</span><span style="color:#9CDCFE">DB_NAME</span><span style="color:#CE9178">}' desde '</span><span style="color:#9CDCFE">$SQL_FILE</span><span style="color:#CE9178">'? (y/n)"</span></span>
<span class="line"><span style="color:#DCDCAA">read</span><span style="color:#CE9178"> CONFIRMATION</span></span>
<span class="line"><span style="color:#C586C0">if</span><span style="color:#D4D4D4"> [[ </span><span style="color:#CE9178">"</span><span style="color:#9CDCFE">$CONFIRMATION</span><span style="color:#CE9178">"</span><span style="color:#D4D4D4"> != </span><span style="color:#CE9178">"y"</span><span style="color:#D4D4D4"> ]]; </span><span style="color:#C586C0">then</span></span>
<span class="line"><span style="color:#DCDCAA">    echo</span><span style="color:#CE9178"> "Operación cancelada."</span></span>
<span class="line"><span style="color:#DCDCAA">    exit</span><span style="color:#B5CEA8"> 1</span></span>
<span class="line"><span style="color:#C586C0">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Comando para restaurar la base de datos</span></span>
<span class="line"><span style="color:#DCDCAA">mysql</span><span style="color:#569CD6"> -u</span><span style="color:#D4D4D4"> ${</span><span style="color:#9CDCFE">DB_USER</span><span style="color:#D4D4D4">} </span><span style="color:#569CD6">-p</span><span style="color:#569CD6"> -h</span><span style="color:#D4D4D4"> ${</span><span style="color:#9CDCFE">DB_HOST</span><span style="color:#D4D4D4">} </span><span style="color:#569CD6">-P</span><span style="color:#D4D4D4"> ${</span><span style="color:#9CDCFE">DB_PORT</span><span style="color:#D4D4D4">} ${</span><span style="color:#9CDCFE">DB_NAME</span><span style="color:#D4D4D4">} &#x3C; ${</span><span style="color:#9CDCFE">SQL_FILE</span><span style="color:#D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955"># Comprobar si el comando mysql tuvo éxito</span></span>
<span class="line"><span style="color:#C586C0">if</span><span style="color:#D4D4D4"> [ </span><span style="color:#569CD6">$?</span><span style="color:#D4D4D4"> -eq </span><span style="color:#B5CEA8">0</span><span style="color:#D4D4D4"> ]; </span><span style="color:#C586C0">then</span></span>
<span class="line"><span style="color:#DCDCAA">    echo</span><span style="color:#CE9178"> "Base de datos '${</span><span style="color:#9CDCFE">DB_NAME</span><span style="color:#CE9178">}' restaurada con éxito desde el archivo '${</span><span style="color:#9CDCFE">SQL_FILE</span><span style="color:#CE9178">}'."</span></span>
<span class="line"><span style="color:#C586C0">else</span></span>
<span class="line"><span style="color:#DCDCAA">    echo</span><span style="color:#CE9178"> "Error al restaurar la base de datos '${</span><span style="color:#9CDCFE">DB_NAME</span><span style="color:#CE9178">}'."</span></span>
<span class="line"><span style="color:#C586C0">fi</span></span>
<span class="line"></span></code></pre>
<p>el script anterior le listara los buckups anteriores y podra seleccionar cual de ellos quiere recuperar.</p> </div> <hr class="border-muted-text dark:border-dark-muted-text my-32 border-[0.5px] opacity-10 dark:opacity-15"> </div>  </main> <footer class="mx-auto flex w-full flex-col items-start gap-6 pt-16 pb-24 sm:flex-row sm:items-center sm:justify-between sm:gap-8"> <div id="theme-toggle" class="relative z-0 inline-grid grid-cols-3 gap-0.5 bg-neutral-950/5 p-0.75 text-neutral-950 dark:bg-white/10 dark:text-white" data-astro-cid-x3pjskd3> <button aria-label="System theme" data-theme="system" class="theme-button p-1.5 sm:p-0" data-astro-cid-x3pjskd3> <svg viewBox="0 0 28 28" fill="none" class="size-7" data-astro-cid-x3pjskd3> <path d="M7.5 8.5C7.5 7.94772 7.94772 7.5 8.5 7.5H19.5C20.0523 7.5 20.5 7.94772 20.5 8.5V16.5C20.5 17.0523 20.0523 17.5 19.5 17.5H8.5C7.94772 17.5 7.5 17.0523 7.5 16.5V8.5Z" stroke="currentColor" data-astro-cid-x3pjskd3></path> <path d="M7.5 8.5C7.5 7.94772 7.94772 7.5 8.5 7.5H19.5C20.0523 7.5 20.5 7.94772 20.5 8.5V14.5C20.5 15.0523 20.0523 15.5 19.5 15.5H8.5C7.94772 15.5 7.5 15.0523 7.5 14.5V8.5Z" stroke="currentColor" data-astro-cid-x3pjskd3></path> <path d="M16.5 20.5V17.5H11.5V20.5M16.5 20.5H11.5M16.5 20.5H17.5M11.5 20.5H10.5" stroke="currentColor" stroke-linecap="round" data-astro-cid-x3pjskd3></path> </svg> </button> <button aria-label="Light theme" data-theme="light" class="theme-button p-1.5 sm:p-0" data-astro-cid-x3pjskd3> <svg viewBox="0 0 28 28" fill="none" class="size-7" data-astro-cid-x3pjskd3> <circle cx="14" cy="14" r="3.5" stroke="currentColor" data-astro-cid-x3pjskd3></circle> <path d="M14 8.5V6.5" stroke="currentColor" stroke-linecap="round" data-astro-cid-x3pjskd3></path> <path d="M17.889 10.1115L19.3032 8.69727" stroke="currentColor" stroke-linecap="round" data-astro-cid-x3pjskd3></path> <path d="M19.5 14L21.5 14" stroke="currentColor" stroke-linecap="round" data-astro-cid-x3pjskd3></path> <path d="M17.889 17.8885L19.3032 19.3027" stroke="currentColor" stroke-linecap="round" data-astro-cid-x3pjskd3></path> <path d="M14 21.5V19.5" stroke="currentColor" stroke-linecap="round" data-astro-cid-x3pjskd3></path> <path d="M8.69663 19.3029L10.1108 17.8887" stroke="currentColor" stroke-linecap="round" data-astro-cid-x3pjskd3></path> <path d="M6.5 14L8.5 14" stroke="currentColor" stroke-linecap="round" data-astro-cid-x3pjskd3></path> <path d="M8.69663 8.69711L10.1108 10.1113" stroke="currentColor" stroke-linecap="round" data-astro-cid-x3pjskd3></path> </svg> </button> <button aria-label="Dark theme" data-theme="dark" class="theme-button p-1.5 sm:p-0" data-astro-cid-x3pjskd3> <svg viewBox="0 0 28 28" fill="none" class="size-7" data-astro-cid-x3pjskd3> <path d="M10.5 9.99914C10.5 14.1413 13.8579 17.4991 18 17.4991C19.0332 17.4991 20.0176 17.2902 20.9132 16.9123C19.7761 19.6075 17.109 21.4991 14 21.4991C9.85786 21.4991 6.5 18.1413 6.5 13.9991C6.5 10.8902 8.39167 8.22304 11.0868 7.08594C10.7089 7.98159 10.5 8.96597 10.5 9.99914Z" stroke="currentColor" stroke-linejoin="round" data-astro-cid-x3pjskd3></path> </svg> </button> </div>  <script data-astro-rerun>
  (function () {
    const theme = localStorage.getItem("currentTheme") || "system";
    const prefersDark = window.matchMedia(
      "(prefers-color-scheme: dark)",
    ).matches;

    const isDark = theme === "dark" || (theme === "system" && prefersDark);

    if (isDark) {
      document.documentElement.classList.add("dark");
      document.documentElement.classList.remove("light");
    } else {
      document.documentElement.classList.add("light");
      document.documentElement.classList.remove("dark");
    }
  })();
</script> <script type="module">function s(){return localStorage.getItem("currentTheme")??"system"}function r(e){e!==null?localStorage.setItem("currentTheme",e):localStorage.removeItem("currentTheme"),c(e)}function c(e){e==="dark"||e==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark")),window._updateTheme?.(e)}function n(){const e=document.querySelectorAll(".theme-button"),a=s();e.forEach(t=>{t.getAttribute("data-theme")===a&&t.classList.add("active"),t.addEventListener("click",()=>{const d=t.getAttribute("data-theme");e.forEach(o=>o.classList.remove("active")),t.classList.add("active"),r(d)})}),c(a),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{s()==="system"&&c("system")})}document.addEventListener("DOMContentLoaded",n);document.addEventListener("astro:page-load",n);(document.readyState==="interactive"||document.readyState==="complete")&&n();</script> <span class="prose mt-2 block">2025 Franco Zuñiga.</span> </footer> </div> </body></html>